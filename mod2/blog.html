<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>cac2323 git</title>
        <style>
            pre code {
              background-color: #eee;
              border: 1px solid #999;
              display: block;
              padding: 20px;
            }

            #link{
                padding: 10px;
                padding-left: 30px;
            }

            #write-up p{
                padding-left: 30px;
            }

            #write-up img{
                width: 50%;
                padding-left: 50px;
            }
        </style>

    </head>
    <body>
        <div class="container">
            <h1>HW 2: Interactive Devices</h1>
            <div id="code">
                <h2>CODE</h2>
                <pre>
                    <code>
#include <TFT_eSPI.h>
#define BUTTON_PIN 33 // GPIO21 pin connected to button
#define PIN_ANALOG_IN 4

TFT_eSPI tft = TFT_eSPI(); // Initialize TFT display
TFT_eSPI tft2 = TFT_eSPI(); // Initialize TFT display

// Variables will change:
int lastState = HIGH; // the previous state from the input pin
int currentState;     // the current reading from the input pin
unsigned long lastDebounceTime = 0;  // the last time the output pin was toggled
unsigned long debounceDelay = 35;    // the debounce time; increase if the output flickers

float floatMap(float x, float in_min, float in_max, float out_min, float out_max) {
  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}

// the setup routine runs once when you press reset:
void setup() {
  
  tft.init();
  tft.setRotation(1); // Landscape orientation
  tft2.init();
  tft2.setRotation(1); // Landscape orientation
  tft2.fillScreen(TFT_BLACK);

  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
  
  pinMode(TFT_BL, OUTPUT);
  ledcSetup(0, 5000, 8); // 0-15, 5000, 8
  ledcAttachPin(TFT_BL, 0); // TFT_BL, 0 - 15
  int analogValue = analogRead(36);
  // Rescale to potentiometer's voltage (from 0V to 3.3V):
  float voltage = floatMap(analogValue, 0, 4095, 0, 255);
  ledcWrite(0, voltage); // 0-15, 0-255 (with 8 bit resolution); 0=totally dark;255=totally shiny
  
  // initialize the pushbutton pin as an pull-up input
  pinMode(BUTTON_PIN, INPUT_PULLUP);
  tft2.drawString("FREE PALESTINE", 0, 0, 2);
}

// the loop routine runs over and over again forever:
void loop() {
  // drawfree(int(random(0, 240)), int(random(0, 150)));
  // read the state of the switch/button:
  currentState = digitalRead(BUTTON_PIN);
  if(lastState == LOW && currentState == HIGH){
    Serial.println("The button is pressed");
    drawfree(int(random(0, 240)), int(random(0, 150)));
  }
  // save the the last state
  lastState = currentState;

  // read the input on analog pin GPIO36:
  int analogValue = analogRead(36);
  // Rescale to potentiometer's voltage (from 0V to 3.3V):
  float voltage = floatMap(analogValue, 0, 4095, 0, 255);

  // print out the value you read:
  Serial.print("Analog: ");
  Serial.print(analogValue);
  Serial.print(", Voltage: ");
  Serial.println(voltage);
  ledcWrite(0, voltage); // 0-15, 0-255 (with 8 bit resolution); 0=totally dark;255=totally shiny
}

void drawfree(int x, int y){
    tft2.drawRect(x-5, y-5, 80, 40, TFT_WHITE);

    tft2.drawRect(x, y, 75, 10, TFT_BLACK);
    tft2.fillRect(x, y, 75, 10, TFT_BLACK);

    tft2.drawRect(x, y+20, 75, 10, TFT_GREEN);
    tft2.fillRect(x, y+20, 75, 10, TFT_GREEN);

    tft2.drawRect(x+15, y+10, 60, 10, TFT_WHITE);
    tft2.fillRect(x+15, y+10, 60, 10, TFT_WHITE);

    tft2.fillTriangle(x, y, x, y+30, x+30, y+15, TFT_RED);

}
                    </code>
                    
                </pre>
                
            </div>

            <div id="vids">
                <h2>VIDEO</h2>
                <div>
                    <a id="link" href="https://youtu.be/LYEqvHXDu4E">blog video</a> 
                    <iframe width="560" height="315"
src="https://youtu.be/LYEqvHXDu4E"> </iframe>
                </div>

                <iframe width="560" height="315" src="https://www.youtube.com/embed/BuaKl-B7LtI?si=4fzb_6Dk2QuH867y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/LYEqvHXDu4E?si=pO8XdmpQhYd78uiw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            </div>

            <div id="write-up">
                <h2>Write-up</h2>
                <p>This installation makes use of ESP30s(TTGO T1), 2 sensors(button, and potentiometer), breadboard, jumper cables(5) in order to create an interactive project/device.
                    I initially had a different idea of an interactive device acted as a metronome, where the user would be able to tap the button with an initial tempo, and then be able
                    to adjust this tempo by using the potentiometer, while also showing the current BPM on the screen of the TTGO T1. I unfortunately was unable to get my BPM
                    calculations to work correctly and shifted gears to something that I thought could make a statement and act as a reflection of the current times, which I believe art should 
                    do(sometimes). As a result, I wanted to create something interactive that may bring more attention to the genocide occuring in Palestine. 

                    The technical side of things are pretty simple, given that there are only 2 sensors, in which I just followed the directions as mentioned in their corresponding
                    chapters in <a href="https://drive.google.com/file/d/1GLq7iRY_I1D5Fgma1Rd3yVhNt3dg7K0T/view">C_Tutorial</a>. The only problems with this that I encountered 
                    were my fault due to faulty solder connections, so the button/potentiometer would not correctly be sending information back to the computer. Because of this, 
                    I would make sure to note to anyone working on a similar project, to pay close attention to the solder connections. 

                    As mentioned before, I was interested in making this project a political statement, that could draw attention to an important event and subject currently happening. 
                    The main idea being our complitness in such atrocities and our privilege to be able to turn a blind eye, turn off our phone, and in this project's case, turn the brightness down,
                    to others' realities. 

                    For every time the button is pressed, an image of a Palestinian flag is randomly placed somewhere on the screen, and when the potentiomenter is turned, 
                    it changes the brightness of the TTGO T1 screen. 

                    I know that it was mentioned that there should be some sort of enclosure for this project, but I thought it fit more to show the breadboard and wires connecting to the 
                    sensors as a way to emphasize the fact that these events are occuring and working right in front of our faces. 
                </p>

<!--                 <img src="IMG_0063.JPG"> -->

            </div>

            
            
            
        </div>
    </body>
</html>
